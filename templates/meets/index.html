{% extends "base/index.html" %}

{% block title %}
    Book Appointment | {{site_name}}
{% endblock title %}

{% block content %}
    <div class="container">
        <h2 class="text-center title-h text-bold">Book Appointment</h2>
        <div class="row justify-content-center">
            <div class="col-md-8 border border-default border-2 p-2 px-3">
                <form action="" method="post">
                    {% csrf_token %}
                    <div class="row mt-1">
                        <label class="col-sm-3 col-form-label" for="inputfullname">Name <span class="text-danger">*</span></label>
                        <div class="col-sm-9">
                          <input required type="text" name="name" placeholder="Name" class="form-control"
                          id="inputfullname" value="{{ request.user.full_name }}" />
                        </div>
                    </div>
                    
                    <div class="row mt-1">
                        <label class="col-sm-3 col-form-label" for="inputemail">Email address <span class="text-danger">*</span></label>
                        <div class="col-sm-9">
                          <input required type="email" name="email" placeholder="abc@gmail.com" class="form-control" id="inputemail"
                          value="{{ request.user.email }}" />
                        </div>
                      </div>

                    <div class="row mt-1">
                        <label for="inputmobile_no" class="col-sm-3 col-form-label">Mobile Number <span class="text-danger">*</span></label>
                        <div class="col-sm-9">
                          <input required type="tel" class="form-control" name="mobile_no" id="inputmobile_no" maxlength="18"
                            value="{{ FieldValues.mobile_no_full }}">
                        </div>
                    </div>
                    
                    <div class="row mt-1">
                        <label class="col-sm-3 col-form-label" for="inputdisease">Disease <span class="text-danger">*</span></label>
                        <div class="col-sm-9">
                          <input required type="text" name="d_name" placeholder="Disease Name" class="form-control"
                          id="inputdisease" />
                        </div>
                    </div>

                    <div class="row mt-1">
                        <label class="col-sm-3 col-form-label" for="inputfullname">Date <span class="text-danger">*</span></label>
                        <div class="col-sm-9">
                          <input required type="date" name="date" placeholder="Date" class="form-control"
                          id="inputfullname" value="{{ request.user.fullname }}" />
                        </div>
                    </div>

                    <button class="btn btn-default mt-3 w-100" type="submit">Book</button>

                </form>
            </div>
        </div>
    </div>
{% endblock content %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>
<script>
  const input = document.querySelector("#inputmobile_no");
      window.intlTelInput(input, {
        separateDialCode: true,
        hiddenInput: "mobile_no_full",
        nationalMode: false, 
        preferredCountries: ["in"],
        initialCountry: "auto",
        geoIpLookup: callback => {
          fetch("https://ipapi.co/json")
            .then(res => res.json())
            .then(data => callback(data.country_code))
            .catch(() => callback("in"));
        },
        utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",
      });
</script>
{% endblock scripts %}


{% block styles %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css">
{% endblock styles %}
  